<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Spring çº¿ç¨‹æ± ï¼ˆç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼‰</title>
      <link href="/2019/09/27/Spring-%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%EF%BC%89/"/>
      <url>/2019/09/27/Spring-%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-Spring-Beanç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#0x01-Spring-Beanç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="0x01 Spring Beanç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>0x01 Spring Beanç”Ÿå‘½å‘¨æœŸç®¡ç†</h2><p>Springåœ¨ç®¡ç†Beanæ—¶é™¤äº†<strong>ä¾èµ–æ³¨å…¥</strong>è¿™ä¸€ä¸»è¦åŠŸèƒ½å¤–ï¼Œä¹Ÿæä¾›äº†åœ¨é¡¹ç›®å¯åŠ¨åˆå§‹åŒ–Beanå’Œé¡¹ç›®ç»“æŸé”€æ¯Beanæ—¶çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™ä¸€åŠŸèƒ½å¯¹æŸäº›æ¶‰åŠåˆ°èµ„æºç®¡ç†çš„Beanæ¥è¯´å¾ˆæœ‰ç”¨ï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡è¦è¯´çš„çº¿ç¨‹æ± ã€‚</p><p>Springåœ¨åˆå§‹åŒ–Beanä¹‹åå’Œé”€æ¯Beanä¹‹å‰æä¾›äº†è¿›è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œçš„å…¥å£ï¼Œä¸»è¦æœ‰ä¸€ä¸‹å‡ ç§æ–¹å¼ï¼š   </p><blockquote><p>1ã€æ³¨è§£æ–¹å¼ï¼Œåœ¨æ–¹æ³•ä¸Šä½¿ç”¨<code>@PostConstruct</code>å’Œ<code>@PreDestroy</code>æ³¨è§£</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"after init ..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é”€æ¯æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before destroy ..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>2ã€æ³¨è§£æ–¹å¼ï¼Œåœ¨<code>@Bean</code>æŒ‡å®šBeançš„åŒæ—¶é€šè¿‡æ³¨è§£çš„å±æ€§<code>initMethod</code>å’Œ<code>destroyMethod</code>æŒ‡å®š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">// @Bean</span></span><br><span class="line">    <span class="meta">@Bean</span>(initMethod = <span class="string">"init"</span>, destroyMethod = <span class="string">"destroy"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DemoService <span class="title">demoService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DemoService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>3ã€xmlé…ç½®ï¼Œé€šè¿‡<code>&lt;bean&gt;</code>çš„<code>init-method</code>å’Œ<code>destroy-method</code>å±æ€§æŒ‡å®š</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"haocdp.spring.core.DemoService"</span> <span class="attr">init-method</span> = <span class="string">"init"</span> <span class="attr">destroy-method</span> = <span class="string">"destroy"</span>/&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>4ã€é€šè¿‡å®ç°<code>InitializingBean</code>å’Œ<code>DisposableBean</code>æ¥å£å®ç°åˆå§‹åŒ–å’Œé”€æ¯ç›¸å…³æ“ä½œ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitOrderBean</span>   <span class="keyword">implements</span> <span class="title">InitializingBean</span>,<span class="title">DisposableBean</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"after ..."</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"before ..."</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ç¬¬äºŒç§æ–¹å¼å’Œç¬¬ä¸‰ç§æ–¹å¼æ˜¯åŒä¸€ç§é…ç½®çš„ä¸åŒå®ç°æ–¹å¼ï¼Œå¹¶ä¸å…¶ä»–ä¸¤ç§æ–¹å¼æœ‰æ‰€å·®å¼‚ã€‚</p><p>å¦‚æœè¿™å‡ ç§æ–¹å¼åŒæ—¶å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p><p><strong>å®ä¾‹åŒ–ï¼š Constructor -&gt; @PostConstruct -&gt; InitializingBean -&gt; init-method</strong></p><hr><p><strong>é”€æ¯ï¼š   @PreDestroy -&gt; DisposableBean -&gt; destroy-method</strong></p><hr><p>è¿™æ ·é¡ºåºçš„å…·ä½“åŸå› ä¸Spring Beanç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼Œæœ¬æ–‡å°±ä¸åšè¯¦ç»†æ¢è®¨ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰è¯¦ç»†äº†è§£è¿‡ã€‚åªéœ€è¦çŸ¥é“è¿™å‡ ç§æ–¹å¼åªæ˜¯Springæä¾›çš„ä¸€äº›åŠŸèƒ½ï¼Œæ–¹ä¾¿è¿›è¡Œä¸€äº›é™„åŠ æ“ä½œã€‚</p><h2 id="0x02-çº¿ç¨‹æ± ç”Ÿå‘½å‘¨æœŸ"><a href="#0x02-çº¿ç¨‹æ± ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="0x02 çº¿ç¨‹æ± ç”Ÿå‘½å‘¨æœŸ"></a>0x02 çº¿ç¨‹æ± ç”Ÿå‘½å‘¨æœŸ</h2><p>ä¹‹æ‰€ä»¥ä¼šå…³æ³¨åˆ°Spring Beançš„ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼Œæ˜¯å› ä¸ºåœ¨ä½¿ç”¨çº¿ç¨‹æ± æ—¶æ¶‰åŠåˆ°äº†çº¿ç¨‹æ± å¦‚ä½•ä¼˜é›…å…³é—­çš„é—®é¢˜ï¼ŒæŸ¥çœ‹Springçº¿ç¨‹æ± çš„æºç æ—¶ï¼Œçœ‹åˆ°äº†ä¸‹é¢è¿™éƒ¨åˆ†ä»£ç ï¼š<br>ï¿¼ï¿¼<img src="../../../../images/20190927/1.png" alt="avatar"><br>è¿™æ˜¯Springçº¿ç¨‹æ± çš„ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è¯¥ç±»å®ç°äº†ä¸Šè¿°çš„<code>InitializingBean</code>å’Œ<code>DisposableBean</code>æ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´Springç®¡ç†çº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸæ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ã€‚</p><p>å¯¹çº¿ç¨‹æ± æ¯”è¾ƒç†Ÿæ‚‰çš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“çº¿ç¨‹æ± çš„åŸºæœ¬é…ç½®å’Œè¿è¡Œæ–¹å¼ï¼Œè¿™é‡Œä¸åšè¯¦è¿°ã€‚æœ¬æ–‡å…³æ³¨çš„æ˜¯çº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸã€‚çº¿ç¨‹æ± çš„çŠ¶æ€ä¸€å…±æœ‰runningã€shutdownã€stopã€tidyingå’Œterminatedã€‚   </p><table><thead><tr><th>çŠ¶æ€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Running</td><td>èƒ½æ¥å—æäº¤æ–°ä»»åŠ¡ï¼Œä¹Ÿèƒ½å¤„ç†é˜»å¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</td></tr><tr><td>Shutdown</td><td>ä¸èƒ½æ¥å—æäº¤çš„æ–°ä»»åŠ¡ï¼Œä½†æ˜¯èƒ½å¤„ç†é˜»å¡é˜Ÿåˆ—ä¸­çš„æœªå®Œä»»åŠ¡</td></tr><tr><td>Stop</td><td>ä¸èƒ½æ¥å—æ–°ä»»åŠ¡ï¼Œä¹Ÿä¸èƒ½å¤„ç†é˜»å¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¼šä¸­æ–­æ­£åœ¨å¤„ç†ä»»åŠ¡çš„çº¿ç¨‹</td></tr><tr><td>Tidying</td><td>å¦‚æœæ‰€æœ‰çš„ä»»åŠ¡éƒ½ç»ˆæ­¢äº†ï¼Œæœ‰æ•ˆçº¿ç¨‹æ•°ä¸º0ï¼Œä¼šè¿›å…¥è¯¥çŠ¶æ€</td></tr><tr><td>Terminated</td><td>å·¥ä½œçº¿ç¨‹æ•°ä¸º0ï¼Œå·¥ä½œé˜Ÿåˆ—ä»»åŠ¡æ•°ä¸º0ï¼Œç”±tidyingçŠ¶æ€è¿›å…¥ï¼Œçº¿ç¨‹æ± å½»åº•ç»“æŸ</td></tr></tbody></table><p><strong>çº¿ç¨‹æ± çŠ¶æ€ä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š</strong> </p><table><thead><tr><th>çŠ¶æ€è½¬æ¢</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Running -&gt; Shutdown</td><td>è°ƒç”¨çº¿ç¨‹æ± çš„<code>shutdown()</code>æ–¹æ³•</td></tr><tr><td>Running/Shutdown -&gt; Stop</td><td>è°ƒç”¨çº¿ç¨‹æ± çš„<code>shutdownNow()</code>æ–¹æ³•</td></tr><tr><td>Shutdown -&gt; Tidying</td><td>é˜»å¡é˜Ÿåˆ—ä¸ºç©ºï¼Œçº¿ç¨‹æ± å·¥ä½œçº¿ç¨‹æ•°ä¸º0</td></tr><tr><td>Stop -&gt; Tidying</td><td>çº¿ç¨‹æ± ä¸­å·¥ä½œçº¿ç¨‹æ•°ä¸º0</td></tr><tr><td>Tidying -&gt; Terminated</td><td>æ‰§è¡Œterminated()æ–¹æ³•è¿›å…¥</td></tr></tbody></table><p>ä»ä¸Šè¿°å¯ä»¥çœ‹å‡ºï¼ŒRunningçŠ¶æ€ä¸‹é€šè¿‡è°ƒç”¨<code>shutdown()</code>/<code>shutdownNow()</code>è¿›è¡ŒçŠ¶æ€è½¬æ¢ï¼Œè¿™æ˜¯ç¨‹åºæ‰‹åŠ¨æ‰§è¡Œçš„ï¼Œè€ŒTidyingçŠ¶æ€æ˜¯ä¸ºäº†æ•´ç†å·¥ä½œçº¿ç¨‹å’Œé˜»å¡é˜Ÿåˆ—ï¼Œæ‰€ä»¥åªè¦æ¡ä»¶è¾¾åˆ°å°±ä¼šè¿›å…¥è¯¥çŠ¶æ€ã€‚è™½ç„¶è¿›å…¥TerminatedçŠ¶æ€éœ€è¦è°ƒç”¨<code>terminated()</code>æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ä¸ªé’©å­æ–¹æ³•ï¼Œåªè¦è¿›å…¥Tidyingå°±ä¼šæ‰§è¡Œã€‚</p><h2 id="0x03-Spring-ç®¡ç†çº¿ç¨‹æ± "><a href="#0x03-Spring-ç®¡ç†çº¿ç¨‹æ± " class="headerlink" title="0x03 Spring ç®¡ç†çº¿ç¨‹æ± "></a>0x03 Spring ç®¡ç†çº¿ç¨‹æ± </h2><p>è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨shutdown()å’ŒshutdownNow()æ–¹æ³•ï¼Œå› ä¸ºåœ¨å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨ä¸åŒçš„æ–¹æ³•ä¼šé€ æˆä¸åŒçš„ç»“æœã€‚å…ˆè¯´ä¸€ä¸‹å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ã€‚<br>å·¥ä½œä¸­ç»å¸¸ä¼šåšä¸€äº›è€—æ—¶æ¯”è¾ƒé•¿çš„æ“ä½œï¼Œæ¯”å¦‚å‘é€é‚®ä»¶æˆ–è€…è®°å½•æ“ä½œæ—¥å¿—ï¼Œè¿™äº›æ“ä½œé€šå¸¸æ˜¯æ­£å¸¸ä¸šåŠ¡é€»è¾‘è§¦å‘çš„ä¸€äº›é™„åŠ åŠŸèƒ½ã€‚å¦‚æœåŒæ­¥æ‰§è¡Œä¼šé€ æˆæ­£å¸¸æ“ä½œååº”æ—¶é—´è¿‡é•¿çš„é—®é¢˜ã€‚æ‰€ä»¥éœ€è¦å¦å¼€çº¿ç¨‹è¿›è¡Œæ“ä½œã€‚è¿™æ—¶éœ€è¦ä½¿ç”¨çº¿ç¨‹æ± ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"targetExecutor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"corePoolSize"</span> <span class="attr">value</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"queueCapacity"</span> <span class="attr">value</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰çº¿ç¨‹æ± ï¼Œå¹¶åœ¨ä»£ç ä¸­æ‰§è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">targetExecutor.execute(() -&gt; addOperateLog(beforeEventInfo, eventInfo));</span><br></pre></td></tr></table></figure><p>åœ¨æ­£å¸¸çš„éƒ¨ç½²é¡¹ç›®ä¸­ï¼Œæ‰§è¡Œä»£ç æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ä¸­è¿›è¡Œæ‰§è¡Œã€‚ä½†æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­æ‰§è¡Œå°±ä¼šæœ‰é—®é¢˜äº†ã€‚çº¿ç¨‹æ± çš„ä»»åŠ¡æ²¡æœ‰æ­£å¸¸æ‰§è¡Œå®Œæ¯•ã€‚<br>é€šè¿‡åˆ†ææ­£å¸¸éƒ¨ç½²é¡¹ç›®å’Œå•å…ƒæµ‹è¯•çš„å·®å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ­£å¸¸éƒ¨ç½²é¡¹ç›®ä¸­çº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸè´¯ç©¿æ•´ä¸ªé¡¹ç›®ï¼Œåªæœ‰æœåŠ¡åœæ‰æ‰ä¼šé”€æ¯çº¿ç¨‹æ± ã€‚ä½†æ˜¯å•å…ƒæµ‹è¯•ä¸»çº¿ç¨‹æ‰§è¡Œå®Œå°±ä¼šå…³é—­çº¿ç¨‹æ± ï¼Œä»è€Œå¯¼è‡´ä»»åŠ¡æ²¡æœ‰æ­£å¸¸æ‰§è¡Œå®Œæ¯•ã€‚<br>è¿™é‡Œæ¶‰åŠåˆ°äº†Spring Beançš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚çº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯é€šè¿‡ä¸Šè¿°è¯´åˆ°çš„è‡ªå®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ“ä½œè¿›è¡Œç®¡ç†ã€‚<br>æŸ¥çœ‹çº¿ç¨‹æ± çš„ä»£ç ï¼š<br>ï¿¼ï¿¼<img src="../../../../images/20190927/2.png" alt="avatar"><br>ï¿¼ï¿¼<img src="../../../../images/20190927/1.png" alt="avatar"><br>å¯ä»¥çœ‹åˆ°çº¿ç¨‹æ± å®ç°äº†InitializingBeanå’ŒDisposableBeanæ¥å£ï¼Œå› æ­¤å½“Springå®¹å™¨å…³é—­æ—¶å°±ä¼šè°ƒç”¨destroy()æ–¹æ³•<br>ï¿¼ï¿¼<img src="../../../../images/20190927/3.png" alt="avatar"><br>é‡ç‚¹åœ¨shutdownæ–¹æ³•ä¸­<br>ï¿¼ï¿¼<img src="../../../../images/20190927/4.png" alt="avatar"><br>é€šè¿‡æŸ¥çœ‹è¿™é‡Œçš„æºç å¯ä»¥å¾—çŸ¥ï¼Œè°ƒç”¨<code>shutdown()</code>è¿˜æ˜¯<code>shutdownNow()</code>æ–¹æ³•å–å†³äº<code>waitForTasksToCompleteOnShutdown</code>å‚æ•°ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ”¹ä¸€ä¸‹çº¿ç¨‹æ± çš„é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"targetExecutor"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"corePoolSize"</span> <span class="attr">value</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"queueCapacity"</span> <span class="attr">value</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"waitForTasksToCompleteOnShutdown"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"awaitTerminationSeconds"</span> <span class="attr">value</span>=<span class="string">"60"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆçº¿ç¨‹æ± ä»RunningçŠ¶æ€ä¼šè¿›å…¥Shutdownï¼Œè¿™æ˜¯ä¼šç­‰å¾…å·²æœ‰çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å†å…³é—­çº¿ç¨‹æ± ã€‚å•å…ƒæµ‹è¯•å°±ä¼šæ­£å¸¸æ‰§è¡Œäº†ã€‚<br>å…¶ä¸­è¿˜æœ‰ä¸€ä¸ª<code>awaitTerminationSeconds</code>å‚æ•°æ˜¯æŒ‡ç­‰å¾…çº¿ç¨‹æ± çŠ¶æ€åˆ°Terminatedçš„æœ€é•¿æ—¶é—´ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring MVC </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring MVC ä¸€æ¬¡è¯·æ±‚å®Œæ•´è¿‡ç¨‹</title>
      <link href="/2019/09/18/Spring-MVC-%E4%B8%80%E6%AC%A1%E8%AF%B7%E6%B1%82%E5%AE%8C%E6%95%B4%E8%BF%87%E7%A8%8B/"/>
      <url>/2019/09/18/Spring-MVC-%E4%B8%80%E6%AC%A1%E8%AF%B7%E6%B1%82%E5%AE%8C%E6%95%B4%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>ä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´é¡ºåºï¼š    </p><table><thead><tr><th align="left">è°ƒç”¨é¡ºåº</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">Filter -&gt;</td><td align="left">ç”¨æˆ·è‡ªå®šä¹‰è¿‡æ»¤å™¨</td></tr><tr><td align="left">DispatcherServlet -&gt;</td><td align="left">è°ƒåº¦ä¸­å¿ƒ</td></tr><tr><td align="left">HandlerMapping -&gt;</td><td align="left">å¤„ç†è¯·æ±‚æ˜ å°„</td></tr><tr><td align="left">getHandler -&gt;</td><td align="left">å¾—åˆ°è¯·æ±‚å¯¹åº”çš„å¤„ç†æ–¹æ³•</td></tr><tr><td align="left">getHandlerAdapter -&gt;</td><td align="left">å¾—åˆ°è°ƒç”¨å¤„ç†æ–¹æ³•çš„é€‚é…å™¨</td></tr><tr><td align="left">Interceptor.preHandle -&gt;</td><td align="left">æ‹¦æˆªå™¨å‰å¤„ç†</td></tr><tr><td align="left">handlerAdapter.handle -&gt;</td><td align="left">è°ƒç”¨é€‚é…å™¨æ–¹æ³•</td></tr><tr><td align="left">HandlerMethod.invoke -&gt;</td><td align="left">è°ƒç”¨è¯·æ±‚å¯¹åº”çš„ç”¨æˆ·å®šä¹‰æ–¹æ³•</td></tr><tr><td align="left">Interceptor.postHandle -&gt;</td><td align="left">æ‹¦æˆªå™¨åå¤„ç†</td></tr><tr><td align="left">Interceptor.afterCompletion -&gt;</td><td align="left">æ‹¦æˆªå™¨å®Œæˆå¤„ç†</td></tr><tr><td align="left">Filter</td><td align="left">å›åˆ°ç”¨æˆ·è‡ªå®šä¹‰è¿‡æ»¤å™¨</td></tr></tbody></table><p><img src="../../../../images/20190918/1-LoginFilter.png" alt="avatar"></p><p><img src="../../../../images/20190918/2-LoginFilter.png" alt="avatar"></p><blockquote><p>ç”¨æˆ·è¯·æ±‚é¦–å…ˆè¿›å…¥è¿‡æ»¤å™¨ä¸­ï¼Œæ ¹æ®è¿‡æ»¤é“¾<code>FilterChain</code>å®šä¹‰è¿›è¡Œé¡ºåºæ‰§è¡Œã€‚</p></blockquote><p><img src="../../../../images/20190918/3-DispatcherServlet.png" alt="avatar"></p><blockquote><p>è¯·æ±‚é€šè¿‡è¿‡æ»¤é“¾ä¹‹åå°±ä¼šè¿›å…¥<code>DispatcherServlet</code>è°ƒåº¦ä¸­å¿ƒçš„<code>doService</code>æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯å¸¸è§„<code>Servlet</code>çš„è°ƒåº¦æµç¨‹ã€‚</p></blockquote><p><img src="../../../../images/20190918/4-DispatcherServlet.png" alt="avatar"></p><p><img src="../../../../images/20190918/5-DispatcherServlet.png" alt="avatar"></p><blockquote><p>åœ¨<code>doService</code>ä¸­è°ƒç”¨<code>doDispatch</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/6-DispatcherServlet-doDispatch.png" alt="avatar"></p><blockquote><p>åœ¨<code>getHandler</code>æ–¹æ³•ä¸­è·å–åˆ°URLåˆ°å¤„ç†æ–¹æ³•çš„æ˜ å°„å…³ç³»ï¼Œå¹¶æ ¹æ®è¯·æ±‚è·å–å¯¹åº”çš„å¤„ç†æ–¹æ³•ã€‚è¿™é‡Œè·å–åˆ°çš„å¹¶ä¸ä»…ä»…æ˜¯ç”¨æˆ·å®šä¹‰çš„<code>Controller</code>å¤„ç†æ–¹æ³•ï¼Œè¿˜åŒ…æ‹¬æ‹¦æˆªå™¨ï¼Œå› æ­¤è¿”å›å¾—åˆ°çš„æ˜¯<code>HandlerExecutionChain</code>æ‰§è¡Œé“¾ã€‚</p></blockquote><p><img src="../../../../images/20190918/7-DispatcherServlet-doDispatch.png" alt="avatar"></p><blockquote><p>æ ¹æ®å½“å‰çš„<code>Handler</code>è·å–å¯¹åº”çš„æ‰§è¡Œé€‚é…å™¨ã€‚</p><blockquote><p>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ç”±äºWebè¯·æ±‚å¯èƒ½ä¼šæœ‰å¾ˆå¤šç§ç±»å‹ï¼Œæ¯”å¦‚æ•°æ®è¯·æ±‚å’Œé™æ€èµ„æºè¯·æ±‚ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šç§å®ç°æ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨æ³¨è§£çš„<code>@Controller</code>ã€å®ç°<code>Controller</code>æ¥å£å’Œå®ç°<code>Servlet</code>æ¥å£ï¼Œæ‰€ä»¥<code>Spring MVC</code>ä¸ºäº†åº”å¯¹ä¸åŒç±»å‹çš„è¯·æ±‚ï¼Œå®šä¹‰äº†<code>Adapter</code>è¿™ä¸€è§’è‰²ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ ¹æ®è¯·æ±‚çš„ä¸åŒç±»å‹ä½¿ç”¨ä¸åŒçš„æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚è¿™é‡Œ<code>getHandlerAdapter</code>å°±æ˜¯ä¸ºäº†è·å–åˆ°è¯·æ±‚å¯¹åº”çš„å¤„ç†é€‚é…å™¨ã€‚<br><code>Spring MVC</code>ä¸­é€‚é…å™¨çš„ç±»å‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š<br><code>AnnotationMethodHandlerAdapter</code>: é€‚é…æ³¨è§£ç±»å¤„ç†å™¨ï¼Œå³ä½¿ç”¨<code>@Controller</code>çš„å¤„ç†å™¨<br><code>HttpRequestHandlerAdapter</code>: é€‚é…é™æ€èµ„æºå¤„ç†å™¨ï¼Œé™æ€èµ„æºå¤„ç†å™¨æ˜¯å®ç° <code>HttpRequestHandler</code>æ¥å£çš„å¤„ç†å™¨ï¼Œè¿™ç±»å¤„ç†å™¨çš„ä½œç”¨æ˜¯å¤„ç†é€šè¿‡<code>Spring MVC</code>è®¿é—®é™æ€èµ„æºçš„è¯·æ±‚ã€‚<br><code>SimpleControllerHandlerAdapter</code>: é€‚é…å®ç°äº†Controlleræ¥å£æˆ–Controlleræ¥å£å­ç±»çš„å¤„ç†å™¨ï¼Œæ¯”å¦‚MultiActionControllerã€‚<br><code>SimpleServletHandlerAdapter</code>: é€‚é…å®ç°äº†Servletæ¥å£æˆ–Servletçš„å­ç±»çš„å¤„ç†å™¨ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯é€‚é…å™¨æ˜¯å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰é…ç½®DispatcherServletä¼šè¯»å–DispatcherServlet.propertiesè¿›è¡Œé»˜è®¤é…ç½®ï¼Œé»˜è®¤çš„é€‚é…å™¨åªæœ‰å‰ä¸‰ç§ï¼Œæ²¡æœ‰<code>SimpleServletHandlerAdapter</code>ã€‚</p></blockquote></blockquote><p><img src="../../../../images/20190918/8-DispatcherServlet-doDispatch.png" alt="avatar"></p><p><img src="../../../../images/20190918/9-HandlerExecutionChain-applyPreHandle.png" alt="avatar"></p><blockquote><p>è·å–åˆ°é€‚é…å™¨åï¼Œå¼€å§‹æ‰§è¡Œè°ƒç”¨é“¾ä¸­çš„æ‹¦æˆªå™¨<code>preHandle</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/10-DispatcherServlet-doDispatch.png" alt="avatar"></p><blockquote><p>æ‰§è¡Œå®Œæ‹¦æˆªå™¨åæ‰ä¼šä½¿ç”¨é€‚é…å™¨æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/11-AbstractHandlerMethodAdapter-handle.png" alt="avatar"></p><blockquote><p>è°ƒç”¨<code>AbstractHandlerMethodAdapter</code>çš„<code>handle</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/12-RequestMappingHandlerAdapter-handleInternal.png" alt="avatar"></p><blockquote><p>è°ƒç”¨<code>RequestMappingHandlerAdapter</code>çš„<code>handleInternal</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/13-RequestMappingHandlerAdapter-invokeHandlerMethod.png" alt="avatar"></p><p><img src="../../../../images/20190918/14-RequestMappingHandlerAdapter-invokeHandlerMethod.png" alt="avatar"></p><blockquote><p>è°ƒç”¨<code>RequestMappingHandlerAdapter</code>çš„<code>invokeHandlerMethod</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/15-ServletInvocableHandlerMethod-invokeAndHandle.png" alt="avatar"></p><blockquote><p>è°ƒç”¨<code>ServletInvocableHandlerMethod</code>çš„<code>invokeAndHandle</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/16-InvocableHandlerMethod-invokeForRequest.png" alt="avatar"></p><p><img src="../../../../images/20190918/17-InvocableHandlerMethod-invokeForRequest.png" alt="avatar"></p><blockquote><p>è°ƒç”¨<code>InvocableHandlerMethod</code>çš„<code>invokeForRequest</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/18-InvocableHandlerMethod-doInvoke.png" alt="avatar"></p><blockquote><p>è°ƒç”¨<code>InvocableHandlerMethod</code>çš„<code>doInvoke</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/19-realMethod.png" alt="avatar"></p><blockquote><p>ï¼ˆæœ€é‡è¦çš„æ¥äº†ï¼‰è¿›å…¥åˆ°ç”¨æˆ·å®šä¹‰çš„è¯·æ±‚å¤„ç†æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/20-DispatcherServlet-doDispatch.png" alt="avatar"></p><p><img src="../../../../images/20190918/21-HandlerExecutionChain-applyPostHandle.png" alt="avatar"></p><blockquote><p>å¾—åˆ°è¯·æ±‚ç»“æœåï¼Œæ‰§è¡Œæ‹¦æˆªå™¨çš„<code>postHandle</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/22-DispatcherServlet-processDispatchResult.png" alt="avatar"></p><p><img src="../../../../images/20190918/23-HandlerExecutionChain-triggerAfterCompletion.png" alt="avatar"></p><blockquote><p>æœ€åæ‰§è¡Œæ‹¦æˆªå™¨çš„<code>afterCompletion</code>æ–¹æ³•ã€‚</p></blockquote><p><img src="../../../../images/20190918/24-LoginFilter.png" alt="avatar"></p><blockquote><p>æœ€åæ‰§è¡Œå®Œå›åˆ°è¿‡æ»¤å™¨ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring MVCé¡¹ç›®åˆå§‹åŒ–</title>
      <link href="/2019/09/18/Spring-MVC%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
      <url>/2019/09/18/Spring-MVC%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-å‰è¨€"><a href="#0x01-å‰è¨€" class="headerlink" title="0x01 å‰è¨€"></a>0x01 å‰è¨€</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“å¯åŠ¨ä¸€ä¸ª<code>Spring MVC</code>é¡¹ç›®ï¼Œéœ€è¦ç±»ä¼¼<code>Tomcat</code>çš„å®¹å™¨æ”¯æŒã€‚<code>Tomcat</code>æ˜¯ä¸€ç§<code>Servlet</code>å®¹å™¨ç”¨äºå¯åŠ¨<code>Java web</code>é¡¹ç›®ï¼Œè€Œå¯åŠ¨ä¸€ä¸ªé¡¹ç›®çš„å…¥å£å°±æ˜¯<code>web.xml</code>é…ç½®æ–‡ä»¶ã€‚åœ¨<code>web.xml</code>ä¸­ä¸»è¦æ˜¯ä¸ºäº†é…ç½®é¡¹ç›®ä¸­ä½¿ç”¨çš„<code>Servlet</code>ã€<code>Filter</code>å’Œ<code>Listener</code>ï¼Œå¹¶å¯¹è¿™å‡ ç§è§’è‰²è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™å‡ ç§è§’è‰²çš„ä½œç”¨å°±ä¸å¤šè¯´äº†ã€‚æœ¬æ–‡çš„é‡ç‚¹æ”¾åœ¨é¡¹ç›®å¯åŠ¨è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®åˆå§‹åŒ–ã€‚</p><h2 id="0x02-web-xmlé…ç½®æ–‡ä»¶"><a href="#0x02-web-xmlé…ç½®æ–‡ä»¶" class="headerlink" title="0x02 web.xmlé…ç½®æ–‡ä»¶"></a>0x02 web.xmlé…ç½®æ–‡ä»¶</h2><p>é’ˆå¯¹ä¸€ä¸ª<code>Spring MVC</code>é¡¹ç›®ï¼Œéœ€è¦åœ¨<code>web.xml</code>ä¸­åŠ è½½<code>Spring</code>é…ç½®æ–‡ä»¶ã€‚åˆå§‹åŒ–çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><blockquote><p>ç¬¬ä¸€ç§ï¼Œä½¿ç”¨<code>Listener</code>è¿›è¡Œåˆå§‹åŒ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:mybatis.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ç¬¬äºŒç§ï¼Œä½¿ç”¨<code>DispatcherServlet</code>è¿›è¡Œåˆå§‹åŒ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-web.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">async-supported</span>&gt;</span>true<span class="tag">&lt;/<span class="name">async-supported</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºç¬¬ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨<code>ContextLoaderListener</code>ç›‘å¬<code>ServletContext</code>åˆå§‹åŒ–æ—¶æ‰§è¡Œï¼Œæ ¹æ®<code>context-param</code>çš„å€¼è¯»å–<code>Spring</code>é…ç½®æ–‡ä»¶è¿›è¡Œåˆå§‹åŒ–ã€‚å…³äºä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨<code>Listener</code>è¿›è¡Œåˆå§‹åŒ–ï¼Œå¯ä»¥å‚è€ƒ<a href="https://haocdp.github.io/2019/09/06/Java-Web-Listener" target="_blank">Java Web Listener</a>è¿™ç¯‡æ–‡ç« ã€‚è¿™ç§æ–¹å¼åˆå§‹åŒ–å¾—åˆ°çš„æ˜¯<code>Application Context</code>ã€‚<br>è€Œç¬¬äºŒç§æ–¹å¼ï¼Œæ˜¯<code>Spring MVC</code>é¡¹ç›®æ›´ä¸ºå¸¸è§çš„ï¼Œå› ä¸º<code>Spring MVC</code>é¡¹ç›®éƒ½éœ€è¦ä½¿ç”¨<code>DispatcherServlet</code>åˆ†å‘è¯·æ±‚ã€‚é€šè¿‡<code>init-param</code>åŠ è½½é…ç½®æ–‡ä»¶è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™ç§æ–¹å¼å¾—åˆ°çš„ä¸Šä¸‹æ–‡æ˜¯<code>WebApplicationContext</code>ï¼Œå®ƒæ˜¯<code>ApplicationContext</code>çš„å­ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚</p><h2 id="0x03-åˆå§‹åŒ–è¿‡ç¨‹"><a href="#0x03-åˆå§‹åŒ–è¿‡ç¨‹" class="headerlink" title="0x03 åˆå§‹åŒ–è¿‡ç¨‹"></a>0x03 åˆå§‹åŒ–è¿‡ç¨‹</h2><p>æœ¬æ–‡åŒæ—¶ä½¿ç”¨ä¸¤ç§åŠ è½½é…ç½®æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ï¼Œä»æºä»£ç çš„å±‚é¢ç†Ÿæ‚‰æ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ã€‚å½“ç„¶ï¼Œä»¥æˆ‘ç›®å‰çš„æ°´å¹³åªèƒ½å¤§è‡´äº†è§£ä¸€ä¸‹åˆå§‹åŒ–è¿‡ç¨‹ï¼Œé‡Œé¢å¾ˆå¤šè¯¦ç»†çš„è¿‡ç¨‹è¿˜æ²¡æœ‰æ·±ç©¶ã€‚  </p><p><img src="../../../../images/20190918/init-1.png" alt="avatar"> </p><p><img src="../../../../images/20190918/init-2.png" alt="avatar"> </p><p><img src="../../../../images/20190918/init-3.png" alt="avatar"> </p><p>å‰é¢çš„å¤§è‡´è¿‡ç¨‹æ˜¯åˆå§‹åŒ–ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç”Ÿæˆ<code>ApplicationContext</code>ã€‚<br><img src="../../../../images/20190918/init-4.png" alt="avatar"> </p><p>æœ€åæ¥åˆ°<code>refresh</code>æ–¹æ³•ï¼Œè¿™é‡Œæ‰æ˜¯åˆå§‹åŒ–é‡è¦çš„ä½ç½®ã€‚é¡ºåºæ¥è¯´å°±æ˜¯æ ¹æ®é…ç½®æ–‡ä»¶çš„ä½ç½®è¯»å–åˆ°é…ç½®æ–‡ä»¶ç”Ÿæˆèµ„æºæ–‡ä»¶ï¼Œç„¶åå¯¹è¿™ä¸ªèµ„æºæ–‡ä»¶è¿›è¡Œè§£æç”Ÿæˆ<code>BeanFactory</code>ã€‚<code>BeanFactory</code>å°±æ˜¯å¯¹Beanè¿›è¡Œç®¡ç†çš„åœ°æ–¹ã€‚é»˜è®¤<code>Bean</code>çš„<code>Scope</code>éƒ½æ˜¯<code>Singleton</code>ï¼Œæ‰€ä»¥åˆå§‹åŒ–å¾—åˆ°çš„éƒ½æ˜¯å•ä¾‹ã€‚</p><p>åˆå§‹åŒ–<code>ApplicationContext</code>ä¹‹åï¼Œwebå®¹å™¨ä¾¿ä¼šå¯¹Filterè¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–çš„è¿‡ç¨‹æ˜¯è°ƒç”¨<code>init</code>æ–¹æ³•ã€‚æœ€åæ‰æ˜¯<code>Servlet</code>,åŒæ ·æ˜¯è°ƒç”¨<code>init</code>æ–¹æ³•ã€‚ï¼ˆåˆå§‹åŒ–é¡ºåºï¼šListener -&gt; Filter -&gt; Servlet) æ‰€ä»¥åˆå§‹åŒ–Filterå®Œæˆä¹‹åï¼Œä¾¿ä¼šå¯¹<code>DispatcherServlet</code>è¿›è¡Œåˆå§‹åŒ–ã€‚ç”±äº<code>DispatcherServlet</code>æœ¬èº«å¹¶æ²¡æœ‰<code>init</code>æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šè°ƒç”¨çˆ¶ç±»<code>HttpServletBean</code>çš„æ–¹æ³•ã€‚<code>DispatcherServlet</code>æ˜¯ä¸€ä¸ªå¤šå±‚ç»§æ‰¿çš„å­ç±»ï¼Œ<code>HttpServletBean</code>ä¸æ˜¯ç›´æ¥çˆ¶ç±»ã€‚</p><p><img src="../../../../images/20190918/init-5.png" alt="avatar"> </p><p>ç„¶åä¼šè°ƒç”¨<code>FrameworkServlet</code>çš„<code>initServletBean</code>æ–¹æ³•ã€‚</p><p><img src="../../../../images/20190918/init-6.png" alt="avatar"> </p><p>åœ¨<code>initServletBean</code>æ–¹æ³•ä¸­è°ƒç”¨<code>initWebApplicationContext</code>æ–¹æ³•ï¼Œä»è¿™é‡Œå¼€å§‹çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸ä¸Šè¿°åŸºæœ¬ç›¸åŒï¼Œéƒ½æ˜¯è¯»å–é…ç½®æ–‡ä»¶ç”Ÿæˆä¸Šä¸‹æ–‡ç¯å¢ƒå’Œå¯¹åº”çš„<code>BeanFactory</code>ã€‚</p><p>åœ¨åŠ è½½é…ç½®æ–‡ä»¶çš„è¿‡ç¨‹ä¸­æœ‰ä¸¤ä¸ªæ ¸å¿ƒç±»ï¼š<br><code>DefaultListableBeanFactory</code> å’Œ <code>XmlBeanDefinitionReader</code>ã€‚</p><h2 id="0x04-Springé…ç½®æ–‡ä»¶è¯»å–"><a href="#0x04-Springé…ç½®æ–‡ä»¶è¯»å–" class="headerlink" title="0x04 Springé…ç½®æ–‡ä»¶è¯»å–"></a>0x04 Springé…ç½®æ–‡ä»¶è¯»å–</h2><p><strong>DefaultListableBeanFactoryï¼šBeanåŠ è½½çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œæ˜¯å¤šä¸ªåŠŸèƒ½çš„ç»“åˆã€‚</strong> </p><hr><p>1ã€AliasRegistryï¼šå®šä¹‰å¯¹aliasçš„ç®€å•å¢åˆ æ”¹æ“ä½œ<br>2ã€SingletonBeanRegistryï¼šå®šä¹‰å¯¹å•ä¾‹çš„æ³¨å†Œå’Œè·å–<br>3ã€BeanFactoryï¼šå®šä¹‰è·å–beanåŠå…¶å±æ€§<br>4ã€BeanDefinitionRegistryï¼šå®šä¹‰å¯¹BeanDefinitionçš„å„ç§å¢åˆ æ”¹æ“ä½œ<br>5ã€ConfigurableBeanFactoryï¼šæä¾›é…ç½®Factoryçš„å„ç§æ–¹æ³•<br>6ã€ListableBeanFactoryï¼šæ ¹æ®å„ç§æ¡ä»¶è·å–beançš„é…ç½®æ¸…å•<br>7ã€AutowireCapableBeanFactoryï¼šæä¾›åˆ›å»ºbeanã€è‡ªåŠ¨æ³¨å…¥ã€åˆå§‹åŒ–ä»¥åŠåº”ç”¨beançš„åå¤„ç†å™¨<br>DefaultListableBeanFactoryæ˜¯ç»“åˆä¸Šé¢æ‰€æœ‰æ¥å£åŠŸèƒ½çš„å®ç°ç±»ï¼Œå…¶ä¸­ä¹Ÿæœ‰é’ˆå¯¹ä¸åŒåŠŸèƒ½ä¹Ÿæœ‰ä¸åŒçš„å®ç°ç±»ã€‚</p><p><strong>XmlBeanDefinitionReader:é’ˆå¯¹XMLé…ç½®æ–‡ä»¶çš„è¯»å–</strong>  </p><hr><p>1ã€ResourceLoaderï¼šå®šä¹‰èµ„æºåŠ è½½å™¨ï¼Œä¸»è¦åº”ç”¨äºæ ¹æ®ç»™å®šçš„èµ„æºæ–‡ä»¶åœ°å€è¿”å›å¯¹åº”çš„Resource<br>2ã€BeanDefinitionReaderï¼šä¸»è¦å®šä¹‰èµ„æºæ–‡ä»¶è¯»å–å¹¶è½¬æ¢ä¸ºBeanDefinitionçš„å„ä¸ªåŠŸèƒ½<br>3ã€EnvironmentCapableï¼šå®šä¹‰è·å–Environmentæ–¹æ³•<br>4ã€DocumentLoaderï¼šå®šä¹‰ä»èµ„æºæ–‡ä»¶åŠ è½½è½¬æ¢ä¸ºDocumentçš„åŠŸèƒ½<br>5ã€BeanDefinitionDocumentReaderï¼šå®šä¹‰è¯»å–Documentå¹¶æ³¨å†ŒBeanDefinitionåŠŸèƒ½<br>6ã€BeanDefinitionParserDelegateï¼šå®šä¹‰è§£æElementçš„å„ç§æ–¹æ³•  </p><p> <strong>XMLé…ç½®æ–‡ä»¶çš„è¯»å–è¿‡ç¨‹ï¼š</strong>  </p><hr><p>1ã€é€šè¿‡å®ç°EnvironmentCapableå’ŒBeanDefinitionReaderä¸­çš„æ–¹æ³•ï¼Œä½¿ç”¨ResourceLoaderå°†èµ„æºæ–‡ä»¶è·¯å¾„è½¬æ¢ä¸ºå¯¹åº”çš„Resourceæ–‡ä»¶<br>2ã€é€šè¿‡DocumentLoaderå¯¹Resourceæ–‡ä»¶è¿›è¡Œè½¬æ¢ï¼Œå°†Resourceæ–‡ä»¶è½¬æ¢ä¸ºDocumentæ–‡ä»¶<br>3ã€é€šè¿‡å®ç°æ¥å£BeanDefinitionDocumentReaderçš„DefaultBeanDefinitionDocumentReaderç±»å¯¹Documentè¿›è¡Œè§£æï¼Œå¹¶ä½¿ç”¨BeanDefinitionParserDelegateå¯¹Elementè¿›è¡Œè§£æ  </p><p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ ¸å¿ƒç±»ï¼Œä¸€ä¸ªæ˜¯æ ¹æ®é…ç½®æ–‡ä»¶è¿›è¡Œè§£æåŠŸèƒ½å®ç°ï¼Œå¦ä¸€ä¸ªæ˜¯æ ¹æ®å¾—åˆ°çš„è§£æç»“æœè¿›è¡Œbeançš„åŠ è½½ã€é…ç½®ã€ç®¡ç†åŠŸèƒ½å®ç°ã€‚ä¸¤ä¸ªç±»éƒ½æ˜¯åœ¨å±‚å±‚æ¥å£å®šä¹‰çš„åŸºç¡€ä¸Šï¼Œç»“åˆä¸åŒç»„ä»¶çš„åŠŸèƒ½ï¼Œå…±åŒå®ç°æœ€åçš„ç›®çš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ æ˜¯äººé—´çš„å››æœˆå¤©</title>
      <link href="/2019/09/08/%E4%BD%A0%E6%98%AF%E4%BA%BA%E9%97%B4%E7%9A%84%E5%9B%9B%E6%9C%88%E5%A4%A9/"/>
      <url>/2019/09/08/%E4%BD%A0%E6%98%AF%E4%BA%BA%E9%97%B4%E7%9A%84%E5%9B%9B%E6%9C%88%E5%A4%A9/</url>
      
        <content type="html"><![CDATA[<center>æˆ‘è¯´ä½ æ˜¯äººé—´çš„å››æœˆå¤©ï¼›</center><center>ç¬‘å“ç‚¹äº®äº†å››é¢é£ï¼›è½»çµ</center><center>åœ¨æ˜¥çš„å…‰è‰³ä¸­äº¤èˆç€å˜ã€‚</center><center>&nbsp;</center><center>ä½ æ˜¯å››æœˆæ—©å¤©é‡Œçš„äº‘çƒŸï¼Œ</center><center>é»„æ˜å¹ç€é£çš„è½¯ï¼Œæ˜Ÿå­åœ¨</center><center>&nbsp;&nbsp;&nbsp;æ— æ„ä¸­é—ªï¼Œç»†é›¨ç‚¹æ´’åœ¨èŠ±å‰ã€‚</center><center>&nbsp; </center><center>&nbsp;&nbsp;é‚£è½»ï¼Œé‚£å¨‰å©·ï¼Œä½ æ˜¯ï¼Œé²œå¦</center><center>ç™¾èŠ±çš„å† å†•ä½ æˆ´ç€ï¼Œä½ æ˜¯</center><center>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¤©çœŸï¼Œåº„ä¸¥ï¼Œä½ æ˜¯å¤œå¤œçš„æœˆåœ†ã€‚</center><center>&nbsp; </center><center>&nbsp;&nbsp;&nbsp;é›ªåŒ–åé‚£ç‰‡é¹…é»„ï¼Œä½ åƒï¼›æ–°é²œ</center><center>&nbsp;&nbsp;&nbsp;åˆæ”¾èŠ½çš„ç»¿ï¼Œä½ æ˜¯ï¼›æŸ”å«©å–œæ‚¦</center><center>&nbsp;&nbsp;&nbsp;æ°´å…‰æµ®åŠ¨ç€ä½ æ¢¦æœŸå¾…ä¸­ç™½è²ã€‚</center><center>&nbsp; </center><center>&nbsp;ä½ æ˜¯ä¸€æ ‘ä¸€æ ‘çš„èŠ±å¼€ï¼Œæ˜¯ç‡•</center><center>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ¢é—´å‘¢å–ƒï¼Œâ€”â€”ä½ æ˜¯çˆ±ï¼Œæ˜¯æš–ï¼Œ</center><center>&nbsp;&nbsp;&nbsp;æ˜¯å¸Œæœ›ï¼Œä½ æ˜¯äººé—´çš„å››æœˆå¤©ï¼</center><center>&nbsp; </center><p>&nbsp;&nbsp;&nbsp;ã€Šä½ æ˜¯äººé—´çš„å››æœˆå¤©ã€‹æ˜¯æ—å¾½å› çš„ä¸€æœ¬ä¹¦ï¼Œä¹Ÿæ˜¯ä¸€é¦–è¯—ã€‚å½“æ—¶ä¹°è¿™æœ¬ä¹¦å­˜ç²¹æ˜¯ä¹°ä¹¦å‡‘å•æ»¡å‡ï¼Œè§‰å¾—è¿™æœ¬ä¹¦çš„åå­—å¥½ç†Ÿæ‚‰ï¼Œä½œè€…åˆæ˜¯æ—å¾½å› å°±ä¹°ä¸‹äº†ã€‚è¯´å®è¯ï¼Œæˆ‘ä¸æ˜¯ä¸€ä¸ªåˆæ ¼çš„æ–‡è‰ºé’å¹´ï¼Œå®Œå…¨çœ‹ä¸äº†è¿™æœ¬ä¹¦ä¸­çš„æ•£æ–‡å’Œè¯—æ­Œã€‚ä¹Ÿå°±çœ‹çœ‹é‡Œé¢çš„ä¹¦ä¿¡ï¼Œä½†æ˜¯å‘¢ï¼Œä¹¦ä¿¡åœ¨å®Œå…¨ä¸äº†è§£å½“æ—¶çš„å†™ä¿¡ç¼˜ç”±å’Œå½“ä¸‹æƒ…å½¢çš„æƒ…å†µä¸‹ï¼ŒçœŸçš„å¾ˆéš¾çœ‹æ‡‚æ˜¯ä»€ä¹ˆæ„æ€ã€‚ä¸æ˜¯å¾ˆäº†è§£æ—å¾½å› ã€æ¢æ€æˆã€èƒ¡é€‚ã€å¾å¿—æ‘©ï¼Œæ— æ³•ç†è§£å½“æ—¶ä½œè€…çš„å†™ä½œç¼˜ç”±å’Œå¿ƒæƒ…ã€‚æ‰€ä»¥ï¼Œåªç€é‡çœ‹äº†ä¹¦ä¸­çš„è¿™é¦–è¯—ã€‚</p><p>&nbsp;&nbsp;&nbsp;&nbsp;è¿™é¦–è¯—çš„åå­—æ˜¯ã€Šä½ æ˜¯äººé—´çš„å››æœˆå¤©ã€‹ï¼Œè®©æˆ‘æƒ³åˆ°äº†ä¸€ä¸ªåŠ¨æ¼«ï¼Œã€Šå››æœˆæ˜¯ä½ çš„è°è¨€ã€‹ã€‚è¿™ä¸ªåŠ¨æ¼«å½“æ—¶çœ‹çš„æ„Ÿè§‰å°±æ˜¯ç”»é¢å¾ˆå”¯ç¾ï¼Œå‰§æƒ…å¾ˆæ¸…æ–°ã€çº¯çˆ±ã€‚å‰§ä¸­æœ‰å¥å°è¯æ˜¯ï¼Œâ€œæ²¡æœ‰ä½ çš„å››æœˆåˆåˆ°äº†â€ï¼Œç»™æˆ‘çš„å°è±¡æœ€æ·±ï¼Œä»¥è‡³äºæ¯åˆ°å››æœˆä»½éƒ½ä¼šæƒ³åˆ°è¿™éƒ¨åŠ¨æ¼«ã€‚å››æœˆçœŸçš„æ˜¯æ˜¥å¤©æœ€å¥½çš„å­£èŠ‚ï¼</p><p>&nbsp;&nbsp;&nbsp;&nbsp;å†è¯´å›ä¸ºä»€ä¹ˆæŠ„å½•è¿™é¦–è¯—ã€‚è¯´å®è¯ï¼Œæ¬£èµè¯—æ­Œçš„æ°´å¹³æœ‰é™ï¼Œæ— æ³•çœŸæ­£ç†è§£è¿™é¦–è¯—çš„æ„å¢ƒã€‚ä½†æ˜¯å½“è¯»åˆ°è¿™é¦–è¯—æ—¶ï¼Œå°±æ„Ÿè§‰è¿™æ˜¯é¦–å†™ç»™è‡ªå·±å¿ƒä¸­æ°¸è¿œå¿˜ä¸äº†çš„é‚£ä¸ªäººçš„è¯—ã€‚å½“ä½ è¯»ç€è¿™é¦–è¯—ï¼Œå¿ƒé‡Œæƒ³ç€å°±ä¼šæ˜¯ä»–/å¥¹ã€‚è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ï¼Œå‘¨æœ«åœ¨å®¶çœŸçš„æ— èŠï¼ˆç”Ÿæ— å¯æ‹è„¸ï¼‰ï¼Œæ‰“å‘æ—¶é—´çš„åŒæ—¶å……å®ä¸‹è‡ªå·±åšå®¢çš„å†…å®¹ï¼Œéšä¾¿å†™å†™ä¸œè¥¿ã€‚ã€‚ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚æ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java Web Listener</title>
      <link href="/2019/09/06/Java-Web-Listener/"/>
      <url>/2019/09/06/Java-Web-Listener/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-Java-Webä¸­æœ‰ä¸‰ä¸ªä¸åŒçš„è§’è‰²"><a href="#0x01-Java-Webä¸­æœ‰ä¸‰ä¸ªä¸åŒçš„è§’è‰²" class="headerlink" title="0x01 Java Webä¸­æœ‰ä¸‰ä¸ªä¸åŒçš„è§’è‰²"></a>0x01 Java Webä¸­æœ‰ä¸‰ä¸ªä¸åŒçš„è§’è‰²</h2><ul><li><strong>Servlet</strong>æ˜¯å¤„ç†ç”¨æˆ·è¯·æ±‚çš„è½½ä½“ï¼Œæ ¹æ®urlæ˜ å°„å°†è¯·æ±‚å‚æ•°å‘ç»™å¯¹åº”servletè¿›è¡Œæ•°æ®å¤„ç†å¹¶è¿”å›response</li><li><strong>Filter</strong>ä»‹äºwebå®¹å™¨ï¼ˆTomcatã€Jettyç­‰ï¼‰å’ŒServletä¹‹é—´ï¼Œä¸»è¦æ˜¯åœ¨è¯·æ±‚åˆ°è¾¾servletä¹‹å‰æ•è·HttpRequestè¿›è¡Œé¢„å…ˆå¤„ç†ï¼Œæ¯”è¾ƒå¸¸è§çš„filteræ˜¯LoginéªŒè¯ã€CharacterEncodingFilter</li><li><strong>Listener</strong>ç‹¬ç«‹äºServletå’ŒFilterä¹‹å¤–ï¼Œä¸å­˜åœ¨å…ˆåå…³ç³»ã€‚Listeneræ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè´¯ç©¿webåº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚ä¸»è¦ä½œç”¨æ˜¯å®šä¹‰ä¸€ç³»åˆ—äº‹ä»¶ï¼Œå¹¶å¯¹äº‹ä»¶è¿›è¡Œç›‘å¬å¤„ç†</li></ul><h2 id="0x02-8ç§Listener"><a href="#0x02-8ç§Listener" class="headerlink" title="0x02 8ç§Listener"></a>0x02 8ç§Listener</h2><table><thead><tr><th align="left">Listener</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">ServletContextListener</td><td align="left">ç”¨äºç›‘å¬ServletContextçš„å¯åŠ¨å’Œé”€æ¯</td></tr><tr><td align="left">ServletContextAttributeListener</td><td align="left">ç”¨äºç›‘å¬ApplicationèŒƒå›´å±æ€§å˜åŒ–</td></tr><tr><td align="left">HttpSessionListener</td><td align="left">ç”¨äºç›‘å¬Sessionçš„åˆ›å»ºå’Œé”€æ¯</td></tr><tr><td align="left">HttpSessionIdListener</td><td align="left">ç”¨äºç›‘å¬Sessionçš„idæ˜¯å¦è¢«æ›´æ”¹</td></tr><tr><td align="left">HttpSessionAttributeListener</td><td align="left">ç”¨äºç›‘å¬sessionèŒƒå›´å±æ€§å˜åŒ–</td></tr><tr><td align="left">HttpSessionActivationListener</td><td align="left">ç”¨äºç›‘å¬ç»‘å®šåœ¨HttpSessionå¯¹è±¡ä¸­çš„JavaBeançŠ¶æ€</td></tr><tr><td align="left">HttpSessionBindingListener</td><td align="left">ç”¨äºç›‘å¬å¯¹è±¡ä¸sessionçš„ç»‘å®šå’Œè§£ç»‘</td></tr><tr><td align="left">ServletRequestListener</td><td align="left">ç”¨äºç›‘å¬ServletRequestå¯¹è±¡çš„åˆå§‹åŒ–å’Œé”€æ¯</td></tr><tr><td align="left">ServletRequestAttributeListener</td><td align="left">ç”¨äºç›‘å¬ServletRequestå¯¹è±¡çš„å±æ€§å˜åŒ–</td></tr></tbody></table><h2 id="0x03-ç€é‡çœ‹ServletContextListener"><a href="#0x03-ç€é‡çœ‹ServletContextListener" class="headerlink" title="0x03 ç€é‡çœ‹ServletContextListener"></a>0x03 ç€é‡çœ‹ServletContextListener</h2><p>è¿™ä¸ªListenerçš„ä½œç”¨æ˜¯ç›‘å¬ServletContextçš„å¯åŠ¨å’Œé”€æ¯ï¼Œä¹Ÿå°±æ˜¯ç›‘å¬webåº”ç”¨çš„å¼€å§‹å’Œç»“æŸã€‚æ‰€ä»¥é€šå¸¸ä¼šä½¿ç”¨è¿™ä¸ªç›‘å¬å™¨åˆå§‹åŒ–å·¥ç¨‹å’Œç»“æŸå·¥ç¨‹ã€‚<br>è¿™é‡Œç€é‡è®²ä¸¤ä¸ªä¾‹å­ï¼š   </p><blockquote><p>Log4jConfigListenerï¼š<br>å¦‚æœåœ¨web.xmlè®¾ç½®äº†è¿™ä¸ªç›‘å¬ï¼Œé‚£ä¹ˆä¼šå¯¹æ—¥å¿—ç³»ç»Ÿè¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œæ—¥å¿—çš„é…ç½®æ–‡ä»¶è·¯å¾„é€šè¿‡Context-paramè¿›è¡Œè®¾ç½®   </p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>log4jConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:soc-log4j.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¤šè¯´ä¸€å˜´åŸç†ï¼Œcontext-paramçš„è®¾ç½®ä¼šå½¢æˆinitParametersï¼ˆMap&lt;String,String&gt;ï¼‰å­˜åœ¨ServletContextä¸­ï¼ŒLog4jConfigListenerè¯»å–åˆ°é…ç½®æ–‡ä»¶çš„è·¯å¾„å³å¯è¿›è¡Œåˆå§‹åŒ–ã€‚åˆå§‹åŒ–ä½¿ç”¨çš„æ˜¯DOMConfiguratorçš„configureAndWatchæ–¹æ³•ã€‚è¿™é‡Œæ˜¯åœ¨webå·¥ç¨‹ä¸­åˆå§‹åŒ–æ—¥å¿—é…ç½®ï¼Œwebå®¹å™¨ï¼ˆtomcatã€jettyç­‰ï¼‰ä¼šåŠ è½½web.xmlè¿›è¡Œåˆå§‹åŒ–ï¼Œè¿›è€ŒåŠ è½½Log4jConfigListenerï¼Œè¿›è€Œå¯¹æ—¥å¿—è¿›è¡Œåˆå§‹åŒ–ã€‚ä½†æ˜¯åœ¨æ™®é€šJavaé¡¹ç›®ä¸­ï¼Œæ²¡æœ‰ä¸Šè¿°è¿™ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±æ‰‹åŠ¨åŠ è½½logé…ç½®æ–‡ä»¶åˆå§‹åŒ–é…ç½®ï¼Œå…·ä½“çš„è¿‡ç¨‹å°±æ˜¯ä½¿ç”¨DOMConfiguratorè°ƒç”¨configureAndWatchæ–¹æ³•ã€‚</p><blockquote><p>ContextLoaderListener<br>è¿™ä¸ªListeneréœ€è¦å’ŒDispatcherServletä¸€èµ·è¯´æ˜ã€‚<br>å¯¹äºä¸€ä¸ªSpringé¡¹ç›®ï¼ˆémvcï¼‰ï¼Œåªéœ€è¦ä½¿ç”¨ContextLoaderListenerå¯¹springé…ç½®è¿›è¡Œåˆå§‹åŒ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring/spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦ä½œç”¨æ˜¯åŠ è½½Beanå¹¶è¿›è¡Œç®¡ç†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šç”Ÿæˆä¸€ä¸ªWebApplicationContextçˆ¶å®¹å™¨ã€‚    </p><p><strong>æ€»çš„è¯´æ¥ï¼š</strong></p><ul><li>DispatherServletæ˜¯Spring mvcå·¥ç¨‹ä¸å¯ç¼ºå°‘çš„ï¼ŒSpring MVCé…ç½®æ–‡ä»¶åœ¨åŸºç¡€ä¸ŠSpringä¸Šæœ‰æ‰€æ‰©å±•ï¼Œæ‰€ä»¥ä½¿ç”¨DispatcherServletå¯¹Controllerç­‰è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶æ ¹æ®MVCçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼ˆåˆå§‹åŒ–æ–‡ä»¶ä¼ è¾“ã€å›½é™…åŒ–ã€æ˜ å°„ç®¡ç†å™¨ã€å¼‚å¸¸å¤„ç†å™¨ã€è§†å›¾æ˜ å°„ç­‰ï¼‰ã€‚</li><li>DispatherServletä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªWebApplicationContextï¼Œä½†æ˜¯æ­¤Contextæ˜¯ContextLoaderListenerç”Ÿæˆçš„WebApplicationContextçš„å­ApplicationContextã€‚</li><li>ä¸¤ä¸ªWebApplicationContextåˆ†åˆ«åŠ è½½ä¸åŒçš„Springé…ç½®ï¼Œç”Ÿæˆä¸åŒçš„BeanFactoryï¼Œæ‰€ä»¥åœ¨è·å–Beançš„æ—¶å€™ï¼Œä¼šå…ˆä»DispatcherServletçš„WebApplicationContextä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰å†é€šè¿‡çˆ¶ApplicationContextè¿›è¡ŒæŸ¥æ‰¾ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•æ‰“å°æ—¥å¿—</title>
      <link href="/2019/09/06/%E5%A6%82%E4%BD%95%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97/"/>
      <url>/2019/09/06/%E5%A6%82%E4%BD%95%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01ã€æ—¥å¿—æ‰“å°çš„ç›®çš„ï¼š"><a href="#0x01ã€æ—¥å¿—æ‰“å°çš„ç›®çš„ï¼š" class="headerlink" title="0x01ã€æ—¥å¿—æ‰“å°çš„ç›®çš„ï¼š"></a>0x01ã€æ—¥å¿—æ‰“å°çš„ç›®çš„ï¼š</h2><blockquote><p>å®šä½é”™è¯¯ï¼ˆé—®é¢˜ï¼‰å‘ç”Ÿçš„æ—¶é—´ã€ä½ç½®ã€åŸå› </p></blockquote><h2 id="0x02ã€æ—¥å¿—æ‰“å°çš„æ—¶æœºï¼š"><a href="#0x02ã€æ—¥å¿—æ‰“å°çš„æ—¶æœºï¼š" class="headerlink" title="0x02ã€æ—¥å¿—æ‰“å°çš„æ—¶æœºï¼š"></a>0x02ã€æ—¥å¿—æ‰“å°çš„æ—¶æœºï¼š</h2><ul><li>è°ƒè¯•å¼€å‘è¿‡ç¨‹ä¸­æ‰“å°è°ƒç”¨ä¿¡æ¯ã€å‚æ•°ä¿¡æ¯</li><li>ç”¨æˆ·è¡Œä¸ºä¿¡æ¯ï¼ˆåŸ‹ç‚¹ï¼‰</li><li>ç¨‹åºè¿è¡Œæ—¥å¿—ï¼ˆå¼‚å¸¸æƒ…å†µï¼‰</li><li>ç³»ç»Ÿï¼ˆæœºå™¨ï¼‰è¿è¡ŒçŠ¶æ€</li></ul><h2 id="0x03ã€æ—¥å¿—çš„å†…å®¹"><a href="#0x03ã€æ—¥å¿—çš„å†…å®¹" class="headerlink" title="0x03ã€æ—¥å¿—çš„å†…å®¹"></a>0x03ã€æ—¥å¿—çš„å†…å®¹</h2><ul><li>æ—¶é—´</li><li>åœ°ç‚¹</li><li>çº§åˆ«ï¼ˆdebugã€infoã€warnã€errorã€fatalï¼‰</li><li>å†…å®¹ï¼ˆå¼‚å¸¸æƒ…å†µï¼‰</li><li>å”¯ä¸€æ ‡è¯†ï¼ˆå‚æ•°ä¿¡æ¯ï¼Œè¡¨ç¤ºå¯¼è‡´è¯¥æ¡æ—¥å¿—å‘ç”Ÿçš„å‚æ•°ï¼‰</li><li>ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆç”¨äºåˆ†æå¼‚å¸¸å‘ç”Ÿçš„åŸå› ï¼‰</li></ul><h2 id="0x04ã€æ—¥å¿—è®°å½•"><a href="#0x04ã€æ—¥å¿—è®°å½•" class="headerlink" title="0x04ã€æ—¥å¿—è®°å½•"></a>0x04ã€æ—¥å¿—è®°å½•</h2><blockquote><p>æ‰“å°æ—¥å¿—çš„åœ°æ–¹ä¸è¦æŠ›å‡ºå¼‚å¸¸ï¼Œä½¿ç”¨æ—¥å¿—è®°å½•é”™è¯¯ä¿¡æ¯ã€‚</p></blockquote><h2 id="0x05ã€æ—¥å¿—çº§åˆ«"><a href="#0x05ã€æ—¥å¿—çº§åˆ«" class="headerlink" title="0x05ã€æ—¥å¿—çº§åˆ«"></a>0x05ã€æ—¥å¿—çº§åˆ«</h2><ul><li>debugï¼š   æœ€å°çº§åˆ«ï¼Œç”¨äºå¼€å‘è°ƒè¯•</li><li>infoï¼š    ç”¨äºè¾“å‡ºå¯å‚è€ƒä¿¡æ¯</li><li>warnï¼š    ç³»ç»Ÿå‡ºç°ä¸ªåˆ«å¼‚å¸¸æƒ…å†µï¼Œä½†æ˜¯è¿™ç§æƒ…å†µå¯èƒ½æ˜¯å› ä¸ºæ•°æ®é”™è¯¯ç­‰å…¶ä»–æƒ…å†µé€ æˆ</li><li>errorï¼š   ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼ˆéé¢„æœŸï¼‰æƒ…å†µï¼Œä¸ä¼šé€ æˆç³»ç»Ÿå´©æºƒï¼Œä½†æ˜¯éœ€è¦è¿›è¡Œä¿®å¤ï¼Œå¦‚Null Pointer</li><li>fatalï¼š   ç³»ç»Ÿå‘ç”Ÿè‡´å‘½é”™è¯¯ï¼Œé€ æˆç³»ç»Ÿå´©æºƒã€é€€å‡ºç­‰æƒ…å†µ</li></ul><h2 id="0x06ã€é¡¹ç›®ä¸­çš„æ€è€ƒ"><a href="#0x06ã€é¡¹ç›®ä¸­çš„æ€è€ƒ" class="headerlink" title="0x06ã€é¡¹ç›®ä¸­çš„æ€è€ƒ"></a>0x06ã€é¡¹ç›®ä¸­çš„æ€è€ƒ</h2><ul><li>å¼€å‘è°ƒè¯•è¿‡ç¨‹ä¸­ä½¿ç”¨debugçº§åˆ«è¿›è¡Œä¿¡æ¯è¾“å‡º</li><li>é’ˆå¯¹æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨infoè¾“å‡ºå‚æ•°æˆ–è€…æ–¹æ³•ç»“æœè¿›è¡Œè®°å½•</li><li>ç¬¬2ä¸ªæ–¹æ³•ä¸­ä¸€èˆ¬ä¼šé€ æˆå¤§é‡ä¿¡æ¯è¾“å‡ºï¼Œæ—¥å¿—è®¾ç½®çº§åˆ«ä¸€èˆ¬ä¸ºwarnã€errorï¼Œæ‰€ä»¥å¦‚æœè®¾ç½®äº†warnå’Œerrorçº§åˆ«ï¼Œé‚£ä¹ˆåœ¨warnå’Œerroræ—¥å¿—è¾“å‡ºä¸­è¯¦ç»†è®°å½•æ—¶é—´ã€åœ°ç‚¹ã€å†…å®¹ã€å”¯ä¸€æ ‡ç¤ºå’Œä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæœ€å¥½æŠŠæ–¹æ³•çš„å‚æ•°æˆ–è€…è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é‡è¦å˜é‡è¿›è¡Œè¾“å‡ºï¼Œä»¥å¸®åŠ©åˆ¤æ–­é”™è¯¯åŸå› </li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Log </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸€ç¯‡åšå®¢</title>
      <link href="/2019/09/05/article-title/"/>
      <url>/2019/09/05/article-title/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¬¬ä¸€ç¯‡åšå®¢"><a href="#ç¬¬ä¸€ç¯‡åšå®¢" class="headerlink" title="ç¬¬ä¸€ç¯‡åšå®¢"></a>ç¬¬ä¸€ç¯‡åšå®¢</h3><p>2019å¹´9æœˆ5æ—¥ äºæ»´æ»´é’»çŸ³å¤§å¦</p><p>ä¸çŸ¥é“å†™äº›ä»€ä¹ˆï¼Œå› ä¸ºè¿˜ä¸å¤ªä¼šç”¨MDã€‚å°±å¾ˆå°´å°¬ğŸ˜…ï¼</p><p>å¯¹äº†ï¼Œæ˜å¤©RNGåŠ æ²¹ï¼Œè™½ç„¶èµ¢ä¸èµ¢éƒ½ä¸å¤ªé‡è¦äº†ï¼Œåæ­£å·²ç»è¿›Sèµ›äº†ã€‚</p><p>ç®—äº†ï¼Œå­¦å­¦Markdownå†å†™å§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/09/05/hello-world/"/>
      <url>/2019/09/05/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
